//import org.gradle.internal.impldep.org.apache.commons.io.FileUtils

/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'com.example.java-conventions'
}

dependencies {
    implementation project(':awsS3')
    implementation project(':liquibase')
    implementation project(':kafka')
    implementation 'commons-io:commons-io:2.11.0'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:2.6.1'
    implementation 'org.springframework.boot:spring-boot-starter-web:2.6.1'
    implementation 'javax.xml.bind:jaxb-api:2.3.1'
    runtimeOnly 'org.postgresql:postgresql:42.3.1'
    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.1'
}

group = 'com.example.sbks'
description = 'sbks'

class GradleTasks extends DefaultTask {

    @TaskAction
    void printLine() {
        for (File myFile : new File("files").listFiles())
            if (myFile.isFile()) myFile.delete()
        println("Folder files is clean")
    }
}

task printJ(type: GradleTasks) {

}
tasks.register("deleteDirectory") {
    it.doFirst {
        delete "$rootDir/files"
        println("Folder files is clean")
    }
}

tasks.register("newDirectory") {
    it.doFirst {
        mkdir "$rootDir/files"
       println("Directory add")
    }
    it.dependsOn("deleteDirectory")
}

tasks.register("newFile"){
    it.doFirst {
        file("$rootDir/files/45.txt").createNewFile()
        println("Create new file")
    }
    it.dependsOn("newDirectory")
}

